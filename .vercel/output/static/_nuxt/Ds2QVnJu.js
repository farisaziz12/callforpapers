import{_ as ee}from"./BMUa4Mus.js";import{_ as te}from"./B6mb89U5.js";import{_ as oe}from"./e5a2q2Ig.js";import le from"./gG1RCPfX.js";import{_ as se}from"./bGsn5nPx.js";import{_ as ae}from"./DuLYKG_V.js";import{_ as ne}from"./C0E9Tss0.js";import{a as re,_ as ie}from"./CR9xEEZR.js";import{_ as de}from"./CRfShdQW.js";import{_ as ue}from"./BtcLJeRg.js";import{_ as pe}from"./D0OK9hne.js";import{_ as me}from"./D_X3x0V_.js";import{e as ce,u as _e,i as y,f as fe,c as u,a as o,b as l,w as n,t as d,g as s,l as c,F as A,r as F,m as E,o as r,d as m,h as w}from"#entry";import{u as xe}from"./C6Yci6z5.js";import"./Dj3WwVQx.js";import"./BdmNfycV.js";import"./CeKH_CPG.js";import"./BmwIZktb.js";import"./BcwvcA4o.js";import"./CEy6y3aN.js";const ge={class:"min-h-screen bg-gray-50 dark:bg-gray-950"},ye={class:"sticky top-0 z-10 bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-800"},ve={class:"max-w-4xl mx-auto px-4 py-4"},ke={class:"flex items-center gap-3 mb-2"},be={class:"flex items-center justify-between gap-3"},he={class:"flex-1 min-w-0"},we={class:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 mt-0.5"},Ve={class:"max-w-4xl mx-auto px-4 py-4 sm:py-6"},Ue={key:0,class:"space-y-3"},Ce={key:1,class:"py-8"},Ae={key:2,class:"text-center py-12 sm:py-16"},Fe={key:3,class:"space-y-3 sm:space-y-4"},Pe={class:"p-4 space-y-3"},ze={class:"text-base sm:text-lg font-semibold text-gray-900 dark:text-white leading-tight mb-1"},Se={class:"text-sm text-gray-600 dark:text-gray-400"},De={class:"flex flex-wrap gap-1.5"},$e={class:"flex flex-wrap gap-1"},Ee={class:"text-xs"},Te={class:"px-1 pb-2 space-y-3 text-sm"},qe={class:"space-y-2"},Ne=["href"],Oe={class:"truncate"},Be=["href"],He={class:"truncate"},Le={class:"grid grid-cols-2 gap-2 text-xs"},Me={key:0},Ie={class:"text-gray-900 dark:text-white font-medium"},je={class:"text-gray-900 dark:text-white font-medium"},Re={key:0,class:"text-xs"},We={class:"text-gray-900 dark:text-white"},Ge={key:1,class:"text-xs"},Je={class:"flex flex-wrap gap-1"},Qe={key:2,class:"text-xs"},Ke={class:"text-gray-900 dark:text-white whitespace-pre-wrap leading-relaxed"},Xe={class:"text-xs text-gray-500 dark:text-gray-500 pt-2 border-t border-gray-100 dark:border-gray-800"},Ye={class:"flex gap-2 p-3 bg-gray-50 dark:bg-gray-800/50 border-t border-gray-200 dark:border-gray-800"},Ze={key:4,class:"mt-6 flex justify-center"},et={class:"p-6"},tt={key:0,class:"space-y-4"},ot={class:"grid grid-cols-2 gap-4"},lt={class:"grid grid-cols-2 gap-4"},st={class:"space-y-2"},at={class:"space-y-2"},nt={class:"flex justify-end gap-3 pt-4"},T=20,Ft=ce({__name:"approved",async setup(rt){let C,q;_e({title:"Approved CFPs - Admin",meta:[{name:"description",content:"Admin panel for managing approved CFPs."}]});const V=y(1),{data:v,pending:B,error:N,refresh:P}=([C,q]=fe(()=>xe("/api/admin/cfps",{query:{page:V,pageSize:T},watch:[V]},"$Qxak_E1Gzb")),C=await C,q(),C),z=y(!1),k=y(new Set),b=y(!1),a=y(null),U=y(""),S=y(!1);function H(i){return{conference:"Conference",workshop:"Workshop",meetup:"Meetup",online:"Online Event"}[i]||i}function L(i){return new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function D(i){return new Date(i).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}async function M(){z.value=!0;try{await P()}finally{z.value=!1}}function I(i){a.value=JSON.parse(JSON.stringify(i)),U.value=i.topics.join(", "),b.value=!0}async function j(){if(a.value){S.value=!0,k.value.add(a.value.id);try{a.value.topics=U.value.split(",").map(i=>i.trim()).filter(Boolean),await $fetch(`/api/admin/cfps/${a.value.id}`,{method:"PATCH",body:a.value}),await P(),b.value=!1,console.log("CFP updated successfully")}catch(i){console.error("Failed to update CFP:",i.data?.error||i.message)}finally{S.value=!1,k.value.delete(a.value.id)}}}async function R(i){confirm("Are you sure you want to delete this CFP? This action cannot be undone.")&&await W(i)}async function W(i){k.value.add(i);try{await $fetch(`/api/admin/cfps/${i}`,{method:"DELETE"}),await P(),console.log("CFP deleted successfully")}catch(e){console.error("Failed to delete CFP:",e.data?.error||e.message)}finally{k.value.delete(i)}}return(i,e)=>{const g=ee,G=te,J=oe,h=le,f=se,Q=ae,K=ne,_=ie,p=re,X=de,$=ue,Y=pe,Z=me;return r(),u("div",ge,[o("div",ye,[o("div",ve,[o("div",ke,[l(g,{to:"/admin",variant:"ghost",size:"xs",icon:"i-heroicons-arrow-left"},{default:n(()=>[...e[17]||(e[17]=[m(" Dashboard ",-1)])]),_:1})]),o("div",be,[o("div",he,[e[18]||(e[18]=o("h1",{class:"text-lg sm:text-2xl font-bold text-gray-900 dark:text-white truncate"}," Approved CFPs ",-1)),o("p",we,d(s(v)?.total||0)+" approved CFPs ",1)]),l(g,{onClick:M,variant:"ghost",size:"sm",loading:s(z),icon:"i-heroicons-arrow-path"},null,8,["loading"])])])]),o("div",Ve,[s(B)?(r(),u("div",Ue,[(r(),u(A,null,F(3,t=>l(G,{key:t,class:"h-40 rounded-xl"})),64))])):s(N)?(r(),u("div",Ce,[l(J,{icon:"i-heroicons-exclamation-triangle",color:"red",variant:"soft",title:"Failed to load CFPs",description:s(N).message},null,8,["description"])])):s(v)?.items?.length?(r(),u("div",Fe,[(r(!0),u(A,null,F(s(v).items,t=>(r(),u("div",{key:t.id,class:"bg-white dark:bg-gray-900 rounded-xl border border-gray-200 dark:border-gray-800 overflow-hidden"},[o("div",Pe,[o("div",null,[o("h2",ze,d(t.title),1),o("p",Se,d(t.city)+", "+d(t.country),1)]),o("div",De,[l(f,{size:"xs",variant:"soft"},{default:n(()=>[m(d(H(t.format)),1)]),_:2},1024),l(f,{size:"xs",variant:"soft",color:"orange"},{default:n(()=>[m(" Closes "+d(D(t.closesAt)),1)]),_:2},1024),t.perks.travel?(r(),w(f,{key:0,size:"xs",variant:"soft",color:"green"},{default:n(()=>[...e[21]||(e[21]=[m(" Travel ",-1)])]),_:1})):c("",!0),t.perks.hotel?(r(),w(f,{key:1,size:"xs",variant:"soft",color:"blue"},{default:n(()=>[...e[22]||(e[22]=[m(" Hotel ",-1)])]),_:1})):c("",!0),t.perks.honorarium?(r(),w(f,{key:2,size:"xs",variant:"soft",color:"purple"},{default:n(()=>[...e[23]||(e[23]=[m(" Honorarium ",-1)])]),_:1})):c("",!0)]),o("div",$e,[(r(!0),u(A,null,F(t.topics.slice(0,4),x=>(r(),w(f,{key:x,size:"xs",variant:"outline"},{default:n(()=>[m(d(x),1)]),_:2},1024))),128)),t.topics.length>4?(r(),w(f,{key:0,size:"xs",variant:"outline",color:"gray"},{default:n(()=>[m(" +"+d(t.topics.length-4),1)]),_:2},1024)):c("",!0)]),l(Q,{items:[{label:"View details",slot:"details-"+t.id,defaultOpen:!1}],size:"sm"},{default:n(({item:x,open:O})=>[l(g,{variant:"ghost",size:"xs",class:"w-full justify-between text-gray-600 dark:text-gray-400"},{default:n(()=>[o("span",Ee,d(O?"Hide details":"View details"),1),l(h,{name:O?"i-heroicons-chevron-up":"i-heroicons-chevron-down",class:"w-4 h-4"},null,8,["name"])]),_:2},1024)]),[`details-${t.id}`]:n(()=>[o("div",Te,[o("div",qe,[o("a",{href:t.websiteUrl,target:"_blank",class:"flex items-center gap-2 text-blue-600 dark:text-blue-400 hover:underline text-xs"},[l(h,{name:"i-heroicons-globe-alt",class:"w-4 h-4 flex-shrink-0"}),o("span",Oe,d(t.websiteUrl),1)],8,Ne),o("a",{href:t.cfpUrl,target:"_blank",class:"flex items-center gap-2 text-blue-600 dark:text-blue-400 hover:underline text-xs"},[l(h,{name:"i-heroicons-document-text",class:"w-4 h-4 flex-shrink-0"}),o("span",He,d(t.cfpUrl),1)],8,Be)]),o("div",Le,[t.timeline.opensAt?(r(),u("div",Me,[e[24]||(e[24]=o("span",{class:"text-gray-500 dark:text-gray-500 block"},"Opens",-1)),o("span",Ie,d(D(t.timeline.opensAt)),1)])):c("",!0),o("div",null,[e[25]||(e[25]=o("span",{class:"text-gray-500 dark:text-gray-500 block"},"Closes",-1)),o("span",je,d(D(t.timeline.closesAt)),1)])]),t.platform?(r(),u("div",Re,[e[26]||(e[26]=o("span",{class:"text-gray-500 dark:text-gray-500"},"Platform: ",-1)),o("span",We,d(t.platform),1)])):c("",!0),t.topics.length>4?(r(),u("div",Ge,[e[27]||(e[27]=o("span",{class:"text-gray-500 dark:text-gray-500 block mb-1"},"All Topics:",-1)),o("div",Je,[(r(!0),u(A,null,F(t.topics,x=>(r(),w(f,{key:x,size:"xs",variant:"outline"},{default:n(()=>[m(d(x),1)]),_:2},1024))),128))])])):c("",!0),t.notes?(r(),u("div",Qe,[e[28]||(e[28]=o("span",{class:"text-gray-500 dark:text-gray-500 block mb-1"},"Notes:",-1)),o("p",Ke,d(t.notes),1)])):c("",!0),o("div",Xe,[o("div",null,"Slug: "+d(t.slug),1),o("div",null,"Last updated "+d(L(t.lastUpdatedAt)),1)])])]),_:2},1032,["items"])]),o("div",Ye,[l(g,{variant:"outline",color:"blue",size:"sm",class:"flex-1",onClick:x=>I(t),loading:s(k).has(t.id)},{default:n(()=>[l(h,{name:"i-heroicons-pencil",class:"w-4 h-4 sm:mr-1.5"}),e[29]||(e[29]=o("span",{class:"hidden sm:inline"},"Edit",-1))]),_:1},8,["onClick","loading"]),l(g,{variant:"outline",color:"red",size:"sm",class:"flex-1",onClick:x=>R(t.id),loading:s(k).has(t.id)},{default:n(()=>[l(h,{name:"i-heroicons-trash",class:"w-4 h-4 sm:mr-1.5"}),e[30]||(e[30]=o("span",{class:"hidden sm:inline"},"Delete",-1))]),_:1},8,["onClick","loading"])])]))),128))])):(r(),u("div",Ae,[l(h,{name:"i-heroicons-inbox",class:"w-16 h-16 mx-auto mb-4 text-gray-400"}),e[19]||(e[19]=o("p",{class:"text-lg font-medium text-gray-900 dark:text-white mb-2"},"No approved CFPs",-1)),e[20]||(e[20]=o("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Approved CFPs will appear here",-1))])),s(v)&&s(v).total>T?(r(),u("div",Ze,[l(K,{modelValue:s(V),"onUpdate:modelValue":e[0]||(e[0]=t=>E(V)?V.value=t:null),"page-count":T,total:s(v).total},null,8,["modelValue","total"])])):c("",!0)]),l(Z,{modelValue:s(b),"onUpdate:modelValue":e[16]||(e[16]=t=>E(b)?b.value=t:null)},{default:n(()=>[o("div",et,[e[34]||(e[34]=o("h3",{class:"text-lg font-semibold mb-4"},"Edit CFP",-1)),s(a)?(r(),u("div",tt,[l(p,{label:"Title",required:""},{default:n(()=>[l(_,{modelValue:s(a).title,"onUpdate:modelValue":e[1]||(e[1]=t=>s(a).title=t)},null,8,["modelValue"])]),_:1}),o("div",ot,[l(p,{label:"City",required:""},{default:n(()=>[l(_,{modelValue:s(a).city,"onUpdate:modelValue":e[2]||(e[2]=t=>s(a).city=t)},null,8,["modelValue"])]),_:1}),l(p,{label:"Country",required:""},{default:n(()=>[l(_,{modelValue:s(a).country,"onUpdate:modelValue":e[3]||(e[3]=t=>s(a).country=t)},null,8,["modelValue"])]),_:1})]),l(p,{label:"Format",required:""},{default:n(()=>[l(X,{modelValue:s(a).format,"onUpdate:modelValue":e[4]||(e[4]=t=>s(a).format=t),options:[{label:"Conference",value:"conference"},{label:"Workshop",value:"workshop"},{label:"Meetup",value:"meetup"},{label:"Online Event",value:"online"}]},null,8,["modelValue"])]),_:1}),l(p,{label:"Website URL",required:""},{default:n(()=>[l(_,{modelValue:s(a).websiteUrl,"onUpdate:modelValue":e[5]||(e[5]=t=>s(a).websiteUrl=t),type:"url"},null,8,["modelValue"])]),_:1}),l(p,{label:"CFP URL",required:""},{default:n(()=>[l(_,{modelValue:s(a).cfpUrl,"onUpdate:modelValue":e[6]||(e[6]=t=>s(a).cfpUrl=t),type:"url"},null,8,["modelValue"])]),_:1}),o("div",lt,[l(p,{label:"Opens At"},{default:n(()=>[l(_,{modelValue:s(a).timeline.opensAt,"onUpdate:modelValue":e[7]||(e[7]=t=>s(a).timeline.opensAt=t),type:"datetime-local"},null,8,["modelValue"])]),_:1}),l(p,{label:"Closes At",required:""},{default:n(()=>[l(_,{modelValue:s(a).timeline.closesAt,"onUpdate:modelValue":e[8]||(e[8]=t=>s(a).timeline.closesAt=t),type:"datetime-local"},null,8,["modelValue"])]),_:1})]),l(p,{label:"Platform"},{default:n(()=>[l(_,{modelValue:s(a).platform,"onUpdate:modelValue":e[9]||(e[9]=t=>s(a).platform=t)},null,8,["modelValue"])]),_:1}),l(p,{label:"Topics (comma separated)",required:""},{default:n(()=>[l(_,{modelValue:s(U),"onUpdate:modelValue":e[10]||(e[10]=t=>E(U)?U.value=t:null)},null,8,["modelValue"])]),_:1}),o("div",st,[e[31]||(e[31]=o("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Perks",-1)),o("div",at,[l($,{modelValue:s(a).perks.travel,"onUpdate:modelValue":e[11]||(e[11]=t=>s(a).perks.travel=t),label:"Travel"},null,8,["modelValue"]),l($,{modelValue:s(a).perks.hotel,"onUpdate:modelValue":e[12]||(e[12]=t=>s(a).perks.hotel=t),label:"Hotel"},null,8,["modelValue"]),l($,{modelValue:s(a).perks.honorarium,"onUpdate:modelValue":e[13]||(e[13]=t=>s(a).perks.honorarium=t),label:"Honorarium"},null,8,["modelValue"])])]),l(p,{label:"Notes"},{default:n(()=>[l(Y,{modelValue:s(a).notes,"onUpdate:modelValue":e[14]||(e[14]=t=>s(a).notes=t),rows:4},null,8,["modelValue"])]),_:1}),o("div",nt,[l(g,{variant:"ghost",onClick:e[15]||(e[15]=t=>b.value=!1)},{default:n(()=>[...e[32]||(e[32]=[m(" Cancel ",-1)])]),_:1}),l(g,{color:"primary",onClick:j,loading:s(S)},{default:n(()=>[...e[33]||(e[33]=[m(" Save Changes ",-1)])]),_:1},8,["loading"])])])):c("",!0)])]),_:1},8,["modelValue"])])}}});export{Ft as default};
