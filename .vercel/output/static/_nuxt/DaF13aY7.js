import{a as b,_ as V}from"./CR9xEEZR.js";import{_ as U}from"./e5a2q2Ig.js";import{_ as k}from"./BMUa4Mus.js";import{_ as E}from"./CFDlSE1d.js";import{_ as C}from"./quUXlGIO.js";import{e as q,u as B,i as u,c as N,a as o,b as t,w as n,o as f,h as A,l as I,m as x,g as r,d as S,y as L}from"#entry";import{u as P}from"./BBom_UnV.js";import"./BcwvcA4o.js";import"./BdmNfycV.js";import"./gG1RCPfX.js";import"./Dj3WwVQx.js";import"./BuV5WqZj.js";const F={class:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8"},T={class:"max-w-md w-full space-y-8"},j={class:"space-y-4"},Z=q({__name:"login",setup(z){B({title:"Admin Login - Call for Papers"});const c=P(),s=u(""),i=u(""),p=u(!1),l=u("");async function g(){p.value=!0,l.value="";try{const{data:a,error:e}=await c.auth.signInWithPassword({email:s.value,password:i.value});if(e)throw e;if(!a?.user?.id)throw new Error("Authentication failed - no user data");const{data:m,error:d}=await c.from("admin_users").select("id").eq("id",a.user.id).single();if(d||!m)throw await c.auth.signOut(),new Error("Not authorized as admin");await L("/admin/moderation")}catch(a){l.value=a.message||"Invalid credentials"}finally{p.value=!1}}return(a,e)=>{const m=V,d=b,w=U,y=k,h=E,v=C;return f(),N("div",F,[o("div",T,[e[3]||(e[3]=o("div",null,[o("h2",{class:"mt-6 text-center text-3xl font-bold text-gray-900 dark:text-white"}," Admin Login "),o("p",{class:"mt-2 text-center text-sm text-gray-600 dark:text-gray-400"}," Sign in with your admin account ")],-1)),t(v,null,{default:n(()=>[t(h,{state:{},onSubmit:g},{default:n(()=>[o("div",j,[t(d,{label:"Email",required:""},{default:n(()=>[t(m,{modelValue:r(s),"onUpdate:modelValue":e[0]||(e[0]=_=>x(s)?s.value=_:null),type:"email",placeholder:"admin@example.com",required:""},null,8,["modelValue"])]),_:1}),t(d,{label:"Password",required:""},{default:n(()=>[t(m,{modelValue:r(i),"onUpdate:modelValue":e[1]||(e[1]=_=>x(i)?i.value=_:null),type:"password",placeholder:"Enter password",required:""},null,8,["modelValue"])]),_:1}),r(l)?(f(),A(w,{key:0,icon:"i-heroicons-exclamation-triangle",color:"red",variant:"soft",description:r(l)},null,8,["description"])):I("",!0),t(y,{type:"submit",loading:r(p),class:"w-full"},{default:n(()=>[...e[2]||(e[2]=[S(" Sign In ",-1)])]),_:1},8,["loading"])])]),_:1})]),_:1})])])}}});export{Z as default};
