import{_ as E}from"./BMUa4Mus.js";import{_ as I}from"./B6mb89U5.js";import{_ as M}from"./e5a2q2Ig.js";import H from"./gG1RCPfX.js";import{_ as L}from"./bGsn5nPx.js";import{_ as O}from"./DuLYKG_V.js";import{e as q,u as R,f as Q,i as U,c as l,a as e,b as r,w as i,t as o,g as d,F as h,r as k,o as a,d as c,h as _,l as u}from"#entry";import{u as W}from"./C6Yci6z5.js";import"./Dj3WwVQx.js";import"./BdmNfycV.js";import"./CeKH_CPG.js";import"./BmwIZktb.js";const G={class:"min-h-screen bg-gray-50 dark:bg-gray-950"},J={class:"sticky top-0 z-10 bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-800"},K={class:"max-w-4xl mx-auto px-4 py-4"},X={class:"flex items-center gap-3 mb-2"},Y={class:"flex items-center justify-between gap-3"},Z={class:"flex-1 min-w-0"},ee={class:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 mt-0.5"},te={class:"max-w-4xl mx-auto px-4 py-4 sm:py-6"},se={key:0,class:"space-y-3"},ae={key:1,class:"py-8"},oe={key:2,class:"text-center py-12 sm:py-16"},re={key:3,class:"space-y-3 sm:space-y-4"},ne={class:"p-4 space-y-3"},le={class:"text-base sm:text-lg font-semibold text-gray-900 dark:text-white leading-tight mb-1"},ie={class:"text-sm text-gray-600 dark:text-gray-400"},de={class:"text-xs text-gray-500 dark:text-gray-500 mt-1"},ce={class:"flex flex-wrap gap-1.5"},pe={class:"flex flex-wrap gap-1"},xe={class:"text-xs"},ue={class:"px-1 pb-2 space-y-3 text-sm"},ye={class:"space-y-2"},fe=["href"],_e={class:"truncate"},me=["href"],ge={class:"truncate"},he={class:"grid grid-cols-2 gap-2 text-xs"},ke={key:0},ve={class:"text-gray-900 dark:text-white font-medium"},be={class:"text-gray-900 dark:text-white font-medium"},we={key:0,class:"text-xs"},Ce={class:"text-gray-900 dark:text-white"},ze={key:1,class:"text-xs"},Ae={class:"flex flex-wrap gap-1"},Fe={key:2,class:"text-xs"},Ue={class:"text-gray-900 dark:text-white whitespace-pre-wrap leading-relaxed"},De={class:"text-xs text-gray-500 dark:text-gray-500 pt-2 border-t border-gray-100 dark:border-gray-800"},Se={class:"flex gap-2 p-3 bg-gray-50 dark:bg-gray-800/50 border-t border-gray-200 dark:border-gray-800"},qe=q({__name:"moderation",async setup(Pe){let g,z;R({title:"CFP Moderation - Admin",meta:[{name:"description",content:"Admin panel for moderating submitted CFPs before publication."}]});const{data:v,pending:D,error:A,refresh:b}=([g,z]=Q(()=>W("/api/admin/moderation","$hs4-gPRr8q")),g=await g,z(),g),w=U(!1),y=U(new Set);function S(n){return{conference:"Conference",workshop:"Workshop",meetup:"Meetup",online:"Online Event"}[n]||n}function P(n){return new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function C(n){return new Date(n).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}async function $(){w.value=!0;try{await b()}finally{w.value=!1}}async function j(n){y.value.add(n);try{await $fetch(`/api/admin/moderation/${n}`,{method:"POST"}),await b(),console.log("CFP approved successfully")}catch(t){console.error("Failed to approve CFP:",t.data?.error||t.message)}finally{y.value.delete(n)}}async function B(n){y.value.add(n);try{await $fetch(`/api/admin/moderation/${n}`,{method:"DELETE"}),await b(),console.log("CFP rejected successfully")}catch(t){console.error("Failed to reject CFP:",t.data?.error||t.message)}finally{y.value.delete(n)}}return(n,t)=>{const m=E,N=I,T=M,f=H,p=L,V=O;return a(),l("div",G,[e("div",J,[e("div",K,[e("div",X,[r(m,{to:"/admin",variant:"ghost",size:"xs",icon:"i-heroicons-arrow-left"},{default:i(()=>[...t[0]||(t[0]=[c(" Dashboard ",-1)])]),_:1})]),e("div",Y,[e("div",Z,[t[1]||(t[1]=e("h1",{class:"text-lg sm:text-2xl font-bold text-gray-900 dark:text-white truncate"}," Moderation Queue ",-1)),e("p",ee,o(d(v)?.items?.length||0)+" pending ",1)]),r(m,{onClick:$,variant:"ghost",size:"sm",loading:d(w),icon:"i-heroicons-arrow-path"},null,8,["loading"])])])]),e("div",te,[d(D)?(a(),l("div",se,[(a(),l(h,null,k(3,s=>r(N,{key:s,class:"h-40 rounded-xl"})),64))])):d(A)?(a(),l("div",ae,[r(T,{icon:"i-heroicons-exclamation-triangle",color:"red",variant:"soft",title:"Failed to load queue",description:d(A).message},null,8,["description"])])):d(v)?.items?.length?(a(),l("div",re,[(a(!0),l(h,null,k(d(v).items,s=>(a(),l("div",{key:s.id,class:"bg-white dark:bg-gray-900 rounded-xl border border-gray-200 dark:border-gray-800 overflow-hidden"},[e("div",ne,[e("div",null,[e("h2",le,o(s.payload.cfp.title),1),e("p",ie,o(s.payload.conference.name),1),e("p",de,o(s.payload.conference.city)+", "+o(s.payload.conference.country),1)]),e("div",ce,[r(p,{size:"xs",variant:"soft"},{default:i(()=>[c(o(S(s.payload.cfp.format)),1)]),_:2},1024),r(p,{size:"xs",variant:"soft",color:"orange"},{default:i(()=>[c(" Closes "+o(C(s.payload.cfp.closesAt)),1)]),_:2},1024),s.payload.cfp.perks.travel?(a(),_(p,{key:0,size:"xs",variant:"soft",color:"green"},{default:i(()=>[...t[4]||(t[4]=[c(" Travel ",-1)])]),_:1})):u("",!0),s.payload.cfp.perks.hotel?(a(),_(p,{key:1,size:"xs",variant:"soft",color:"blue"},{default:i(()=>[...t[5]||(t[5]=[c(" Hotel ",-1)])]),_:1})):u("",!0),s.payload.cfp.perks.honorarium?(a(),_(p,{key:2,size:"xs",variant:"soft",color:"purple"},{default:i(()=>[...t[6]||(t[6]=[c(" Honorarium ",-1)])]),_:1})):u("",!0)]),e("div",pe,[(a(!0),l(h,null,k(s.payload.cfp.topics.slice(0,4),x=>(a(),_(p,{key:x,size:"xs",variant:"outline"},{default:i(()=>[c(o(x),1)]),_:2},1024))),128)),s.payload.cfp.topics.length>4?(a(),_(p,{key:0,size:"xs",variant:"outline",color:"gray"},{default:i(()=>[c(" +"+o(s.payload.cfp.topics.length-4),1)]),_:2},1024)):u("",!0)]),r(V,{items:[{label:"View details",slot:"details-"+s.id,defaultOpen:!1}],size:"sm"},{default:i(({item:x,open:F})=>[r(m,{variant:"ghost",size:"xs",class:"w-full justify-between text-gray-600 dark:text-gray-400"},{default:i(()=>[e("span",xe,o(F?"Hide details":"View details"),1),r(f,{name:F?"i-heroicons-chevron-up":"i-heroicons-chevron-down",class:"w-4 h-4"},null,8,["name"])]),_:2},1024)]),[`details-${s.id}`]:i(()=>[e("div",ue,[e("div",ye,[e("a",{href:s.payload.conference.websiteUrl,target:"_blank",class:"flex items-center gap-2 text-blue-600 dark:text-blue-400 hover:underline text-xs"},[r(f,{name:"i-heroicons-globe-alt",class:"w-4 h-4 flex-shrink-0"}),e("span",_e,o(s.payload.conference.websiteUrl),1)],8,fe),e("a",{href:s.payload.cfp.cfpUrl,target:"_blank",class:"flex items-center gap-2 text-blue-600 dark:text-blue-400 hover:underline text-xs"},[r(f,{name:"i-heroicons-document-text",class:"w-4 h-4 flex-shrink-0"}),e("span",ge,o(s.payload.cfp.cfpUrl),1)],8,me)]),e("div",he,[s.payload.cfp.opensAt?(a(),l("div",ke,[t[7]||(t[7]=e("span",{class:"text-gray-500 dark:text-gray-500 block"},"Opens",-1)),e("span",ve,o(C(s.payload.cfp.opensAt)),1)])):u("",!0),e("div",null,[t[8]||(t[8]=e("span",{class:"text-gray-500 dark:text-gray-500 block"},"Closes",-1)),e("span",be,o(C(s.payload.cfp.closesAt)),1)])]),s.payload.conference.platform?(a(),l("div",we,[t[9]||(t[9]=e("span",{class:"text-gray-500 dark:text-gray-500"},"Platform: ",-1)),e("span",Ce,o(s.payload.conference.platform),1)])):u("",!0),s.payload.cfp.topics.length>4?(a(),l("div",ze,[t[10]||(t[10]=e("span",{class:"text-gray-500 dark:text-gray-500 block mb-1"},"All Topics:",-1)),e("div",Ae,[(a(!0),l(h,null,k(s.payload.cfp.topics,x=>(a(),_(p,{key:x,size:"xs",variant:"outline"},{default:i(()=>[c(o(x),1)]),_:2},1024))),128))])])):u("",!0),s.payload.cfp.notes?(a(),l("div",Fe,[t[11]||(t[11]=e("span",{class:"text-gray-500 dark:text-gray-500 block mb-1"},"Notes:",-1)),e("p",Ue,o(s.payload.cfp.notes),1)])):u("",!0),e("div",De," Submitted "+o(P(s.submittedAt)),1)])]),_:2},1032,["items"])]),e("div",Se,[r(m,{variant:"outline",color:"red",size:"sm",class:"flex-1",onClick:x=>B(s.id),loading:d(y).has(s.id)},{default:i(()=>[r(f,{name:"i-heroicons-x-mark",class:"w-4 h-4 sm:mr-1.5"}),t[12]||(t[12]=e("span",{class:"hidden sm:inline"},"Reject",-1))]),_:1},8,["onClick","loading"]),r(m,{color:"green",size:"sm",class:"flex-1",onClick:x=>j(s.id),loading:d(y).has(s.id)},{default:i(()=>[r(f,{name:"i-heroicons-check",class:"w-4 h-4 sm:mr-1.5"}),t[13]||(t[13]=e("span",{class:"hidden sm:inline"},"Approve",-1))]),_:1},8,["onClick","loading"])])]))),128))])):(a(),l("div",oe,[r(f,{name:"i-heroicons-clipboard-document-check",class:"w-16 h-16 mx-auto mb-4 text-gray-400"}),t[2]||(t[2]=e("p",{class:"text-lg font-medium text-gray-900 dark:text-white mb-2"},"All caught up!",-1)),t[3]||(t[3]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"No items need review",-1))]))])])}}});export{qe as default};
