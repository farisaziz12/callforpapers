import J from"./gG1RCPfX.js";import{_ as L}from"./BMUa4Mus.js";import{_ as z}from"./B6mb89U5.js";import{_ as K}from"./e5a2q2Ig.js";import{_ as Q}from"./bGsn5nPx.js";import{_ as H}from"./quUXlGIO.js";import{a as X,_ as Y}from"./CR9xEEZR.js";import{_ as Z}from"./CRfShdQW.js";import{_ as ee}from"./CFDlSE1d.js";import{_ as te}from"./D_X3x0V_.js";import{a as oe}from"./pO2UHtlK.js";import{e as ae,u as le,f as ne,i as F,v as se,j as re,c as p,a as s,b as o,w as l,g as n,F as D,r as T,m as ie,o as i,d,h as _,t as v,l as x}from"#entry";import{u as de}from"./C6Yci6z5.js";import"./Dj3WwVQx.js";import"./BdmNfycV.js";import"./BcwvcA4o.js";import"./BuV5WqZj.js";import"./CEy6y3aN.js";import"./CeKH_CPG.js";const ue={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},me={class:"flex justify-between items-center mb-8"},ce={key:0,class:"space-y-4"},pe={key:1,class:"text-center py-12"},fe={key:2,class:"text-center py-12"},_e={class:"text-gray-500 dark:text-gray-400"},ve={key:3,class:"space-y-4"},ye={class:"flex justify-between items-start"},xe={class:"flex-1"},he={class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"},be={class:"flex flex-wrap gap-2 mb-3"},ge={class:"flex space-x-3"},Se={class:"space-y-4"},ke={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},we={class:"flex justify-end space-x-3"},Le=ae({__name:"saved-searches",async setup(Ce){let h,S;le({title:"Saved Searches - Call for Papers",meta:[{name:"description",content:"Manage your saved CFP searches and get notified about relevant opportunities."}]});const{data:k,pending:B,error:w,refresh:C}=([h,S]=ne(()=>de("/api/account/saved-searches","$8EOA7FjWO6")),h=await h,S(),h),c=F(!1),g=F(!1),r=se({name:"",filters:{}}),O=[{label:"All Countries",value:""},{label:"United States",value:"United States"},{label:"United Kingdom",value:"United Kingdom"},{label:"Germany",value:"Germany"},{label:"Netherlands",value:"Netherlands"},{label:"Canada",value:"Canada"}],q=[{label:"All Topics",value:""},{label:"JavaScript",value:"JavaScript"},{label:"React",value:"React"},{label:"Vue.js",value:"Vue.js"},{label:"Python",value:"Python"},{label:"DevOps",value:"DevOps"}],A=[{label:"All Formats",value:""},{label:"Conference",value:"conference"},{label:"Workshop",value:"workshop"},{label:"Meetup",value:"meetup"},{label:"Online Event",value:"online"}],$=re(()=>{const a=new Date,e=new Date(a.getTime()+10080*60*1e3),m=new Date(a.getTime()+720*60*60*1e3);return[{label:"All Deadlines",value:""},{label:"Closing this week",value:e.toISOString()},{label:"Closing this month",value:m.toISOString()}]});function M(a){return{conference:"Conference",workshop:"Workshop",meetup:"Meetup",online:"Online Event"}[a]||a}function N(a){const e=new Date(a),m=new Date,u=Math.ceil((e.getTime()-m.getTime())/(1e3*60*60*24));return u<=7?"This week":u<=30?"This month":"This quarter"}function j(a){const e=new URLSearchParams;return a.q&&e.set("q",a.q),a.country&&e.set("country",a.country),a.topic&&e.set("topic",a.topic),a.format&&e.set("format",a.format),a.closesBefore&&e.set("closesBefore",a.closesBefore),`/search?${e.toString()}`}async function P(){g.value=!0;try{await $fetch("/api/account/saved-searches",{method:"POST",body:r}),c.value=!1,Object.assign(r,{name:"",filters:{}}),await C()}catch(a){console.error("Failed to create saved search:",a)}finally{g.value=!1}}async function E(a){try{await $fetch(`/api/account/saved-searches/${a}`,{method:"DELETE"}),await C()}catch(e){console.error("Failed to delete saved search:",e)}}return(a,e)=>{const m=J,u=L,R=z,I=K,y=Q,V=H,U=Y,f=X,b=Z,W=ee,G=te;return i(),p("div",ue,[s("div",me,[e[11]||(e[11]=s("div",null,[s("h1",{class:"text-3xl font-bold text-gray-900 dark:text-white"}," Saved Searches "),s("p",{class:"mt-2 text-gray-600 dark:text-gray-300"}," Save your search criteria to quickly find relevant CFPs. ")],-1)),o(u,{onClick:e[0]||(e[0]=t=>c.value=!0)},{default:l(()=>[o(m,{name:"i-heroicons-plus",class:"w-4 h-4 mr-2"}),e[10]||(e[10]=d(" New Search ",-1))]),_:1})]),n(B)?(i(),p("div",ce,[(i(),p(D,null,T(3,t=>o(R,{key:t,class:"h-24"})),64))])):n(w)?(i(),p("div",pe,[o(I,{icon:"i-heroicons-exclamation-triangle",color:"red",variant:"soft",title:"Failed to load saved searches",description:n(w).message},null,8,["description"])])):n(k)?.length?(i(),p("div",ve,[(i(!0),p(D,null,T(n(k),t=>(i(),_(V,{key:t.id,class:"hover:shadow-md transition-shadow"},{default:l(()=>[s("div",ye,[s("div",xe,[s("h3",he,v(t.name),1),s("div",be,[t.filters.q?(i(),_(y,{key:0,variant:"soft"},{default:l(()=>[d(' Query: "'+v(t.filters.q)+'" ',1)]),_:2},1024)):x("",!0),t.filters.country?(i(),_(y,{key:1,variant:"soft"},{default:l(()=>[d(" Country: "+v(t.filters.country),1)]),_:2},1024)):x("",!0),t.filters.topic?(i(),_(y,{key:2,variant:"soft"},{default:l(()=>[d(" Topic: "+v(t.filters.topic),1)]),_:2},1024)):x("",!0),t.filters.format?(i(),_(y,{key:3,variant:"soft"},{default:l(()=>[d(" Format: "+v(M(t.filters.format)),1)]),_:2},1024)):x("",!0),t.filters.closesBefore?(i(),_(y,{key:4,variant:"soft"},{default:l(()=>[d(" Deadline: "+v(N(t.filters.closesBefore)),1)]),_:2},1024)):x("",!0)]),s("div",ge,[o(u,{to:j(t.filters),variant:"outline",size:"sm"},{default:l(()=>[o(m,{name:"i-heroicons-magnifying-glass",class:"w-4 h-4 mr-1"}),e[15]||(e[15]=d(" Run Search ",-1))]),_:1},8,["to"]),o(u,{variant:"ghost",size:"sm",color:"red",onClick:Ve=>E(t.id)},{default:l(()=>[o(m,{name:"i-heroicons-trash",class:"w-4 h-4 mr-1"}),e[16]||(e[16]=d(" Delete ",-1))]),_:1},8,["onClick"])])])])]),_:2},1024))),128))])):(i(),p("div",fe,[s("div",_e,[o(m,{name:"i-heroicons-bookmark",class:"w-12 h-12 mx-auto mb-4"}),e[13]||(e[13]=s("p",{class:"text-lg mb-2"},"No saved searches yet",-1)),e[14]||(e[14]=s("p",null,"Create your first saved search to get notified about relevant CFPs.",-1)),o(u,{onClick:e[1]||(e[1]=t=>c.value=!0),class:"mt-4"},{default:l(()=>[...e[12]||(e[12]=[d(" Create Saved Search ",-1)])]),_:1})])])),o(G,{modelValue:n(c),"onUpdate:modelValue":e[9]||(e[9]=t=>ie(c)?c.value=t:null)},{default:l(()=>[o(V,null,{header:l(()=>[...e[17]||(e[17]=[s("h2",{class:"text-xl font-semibold"},"Create Saved Search",-1)])]),default:l(()=>[o(W,{schema:n(oe),state:n(r),onSubmit:P},{footer:l(()=>[s("div",we,[o(u,{type:"button",variant:"outline",onClick:e[8]||(e[8]=t=>c.value=!1)},{default:l(()=>[...e[18]||(e[18]=[d(" Cancel ",-1)])]),_:1}),o(u,{type:"submit",loading:n(g)},{default:l(()=>[...e[19]||(e[19]=[d(" Save Search ",-1)])]),_:1},8,["loading"])])]),default:l(()=>[s("div",Se,[o(f,{label:"Search Name",name:"name",required:""},{default:l(()=>[o(U,{modelValue:n(r).name,"onUpdate:modelValue":e[2]||(e[2]=t=>n(r).name=t),placeholder:"e.g. JavaScript Conferences"},null,8,["modelValue"])]),_:1}),o(f,{label:"Search Query",name:"filters.q"},{default:l(()=>[o(U,{modelValue:n(r).filters.q,"onUpdate:modelValue":e[3]||(e[3]=t=>n(r).filters.q=t),placeholder:"Search keywords..."},null,8,["modelValue"])]),_:1}),s("div",ke,[o(f,{label:"Country",name:"filters.country"},{default:l(()=>[o(b,{modelValue:n(r).filters.country,"onUpdate:modelValue":e[4]||(e[4]=t=>n(r).filters.country=t),options:O,placeholder:"All Countries"},null,8,["modelValue"])]),_:1}),o(f,{label:"Topic",name:"filters.topic"},{default:l(()=>[o(b,{modelValue:n(r).filters.topic,"onUpdate:modelValue":e[5]||(e[5]=t=>n(r).filters.topic=t),options:q,placeholder:"All Topics"},null,8,["modelValue"])]),_:1}),o(f,{label:"Format",name:"filters.format"},{default:l(()=>[o(b,{modelValue:n(r).filters.format,"onUpdate:modelValue":e[6]||(e[6]=t=>n(r).filters.format=t),options:A,placeholder:"All Formats"},null,8,["modelValue"])]),_:1}),o(f,{label:"Deadline",name:"filters.closesBefore"},{default:l(()=>[o(b,{modelValue:n(r).filters.closesBefore,"onUpdate:modelValue":e[7]||(e[7]=t=>n(r).filters.closesBefore=t),options:n($),placeholder:"All Deadlines"},null,8,["modelValue","options"])]),_:1})])])]),_:1},8,["schema","state"])]),_:1})]),_:1},8,["modelValue"])])}}});export{Le as default};
