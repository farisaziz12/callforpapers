import{_ as Z,a as ee}from"./CR9xEEZR.js";import W from"./gG1RCPfX.js";import{_ as oe,C as te,T as se}from"./B2vteQys.js";import{_ as ae}from"./CRfShdQW.js";import{_ as re}from"./bGsn5nPx.js";import{_ as ne}from"./BMUa4Mus.js";import{_ as le}from"./quUXlGIO.js";import{_ as ie}from"./D_X3x0V_.js";import{e as G,i as w,j as F,k as H,c as i,a as l,l as g,b as n,g as e,w as c,h as S,F as D,r as M,m as j,o as a,d as u,t as y,n as de,u as ce,p as ue,q as me,f as pe,s as ge}from"#entry";import{u as fe}from"./HXyCC8Z1.js";import{u as ve}from"./BcwvcA4o.js";import{_ as _e}from"./e5a2q2Ig.js";import{_ as ye}from"./yokbGQWe.js";import{_ as he}from"./C0E9Tss0.js";import{u as ke}from"./C6Yci6z5.js";import"./BdmNfycV.js";import"./CEy6y3aN.js";import"./CeKH_CPG.js";import"./BmwIZktb.js";import"./BuV5WqZj.js";import"./Dj3WwVQx.js";import"./BJq8fGhF.js";const xe={class:"bg-gradient-to-r from-white to-gray-50 dark:from-gray-900 dark:to-gray-800 border-b border-gray-200 dark:border-gray-700 sticky top-0 z-10 shadow-sm"},be={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},Se={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4"},Ce={class:"xl:col-span-2"},we={key:0},Ve={key:1,class:"text-gray-500"},$e={key:0},qe={key:1,class:"text-gray-500"},Ue={key:0,class:"mt-4 flex flex-wrap gap-3 items-center"},Be={key:0,class:"flex flex-wrap gap-2 items-center"},ze={key:1,class:"ml-auto flex gap-2"},Ae={key:1,class:"mt-4"},Fe={class:"flex items-center gap-2 mb-2"},Ie={class:"flex flex-wrap gap-2"},Oe={class:"space-y-4"},Ne={class:"flex justify-end gap-2"},Pe=G({__name:"FilterBar",props:{filters:{}},emits:["update:filters"],setup(R,{emit:C}){const V=R,f=C,t=w({...V.filters}),h=te,$=se,k=[{label:"All Formats",value:""},{label:"Conference",value:"conference"},{label:"Workshop",value:"workshop"},{label:"Meetup",value:"meetup"},{label:"Online Event",value:"online"}],q=F(()=>{const p=new Date,o=new Date(p.getTime()+10080*60*1e3),O=new Date(p.getTime()+720*60*60*1e3),B=new Date(p.getTime()+2160*60*60*1e3);return[{label:"All Deadlines",value:""},{label:"Closing this week",value:o.toISOString()},{label:"Closing this month",value:O.toISOString()},{label:"Closing this quarter",value:B.toISOString()}]}),{preferences:I,addSavedSearch:E}=fe(),x=w(!1),v=w(""),d=w(!1),r=F(()=>I.value.savedSearches),U=F(()=>!!(t.value.q||t.value.country||t.value.topic||t.value.format||t.value.closesBefore));function m(){f("update:filters",{...t.value})}const P=ve(m,300);function b(p){t.value[p]=void 0,m()}function T(){t.value={},m()}function _(){v.value.trim()&&(E(v.value,{...t.value}),v.value="",x.value=!1)}function J(p){t.value={...p.filters},m()}return H(()=>V.filters,p=>{t.value={...p}},{deep:!0}),(p,o)=>{const O=Z,B=W,K=oe,L=ae,z=re,A=ne,Q=ee,X=le,Y=ie;return a(),i("div",xe,[l("div",be,[l("div",Se,[l("div",Ce,[n(O,{modelValue:e(t).q,"onUpdate:modelValue":o[0]||(o[0]=s=>e(t).q=s),placeholder:"Search CFPs...",icon:"i-heroicons-magnifying-glass",size:"lg",onInput:e(P),class:"shadow-sm"},null,8,["modelValue","onInput"])]),n(K,{modelValue:e(t).country,"onUpdate:modelValue":[o[1]||(o[1]=s=>e(t).country=s),m],options:e(h),placeholder:"All Countries",searchable:"","searchable-placeholder":"Search countries...",size:"lg",class:"shadow-sm"},{label:c(()=>[e(t).country?(a(),i("span",we,[n(B,{name:"i-heroicons-map-pin",class:"w-4 h-4 inline mr-1"}),u(" "+y(e(t).country),1)])):(a(),i("span",Ve,"All Countries"))]),_:1},8,["modelValue","options"]),n(K,{modelValue:e(t).topic,"onUpdate:modelValue":[o[2]||(o[2]=s=>e(t).topic=s),m],options:e($),placeholder:"All Topics",searchable:"","searchable-placeholder":"Search topics...",size:"lg",class:"shadow-sm"},{label:c(()=>[e(t).topic?(a(),i("span",$e,[n(B,{name:"i-heroicons-tag",class:"w-4 h-4 inline mr-1"}),u(" "+y(e(t).topic),1)])):(a(),i("span",qe,"All Topics"))]),_:1},8,["modelValue","options"]),n(L,{modelValue:e(t).format,"onUpdate:modelValue":o[3]||(o[3]=s=>e(t).format=s),options:k,placeholder:"All Formats",size:"lg",onChange:m,class:"shadow-sm"},null,8,["modelValue"]),n(L,{modelValue:e(t).closesBefore,"onUpdate:modelValue":o[4]||(o[4]=s=>e(t).closesBefore=s),options:e(q),placeholder:"All Deadlines",size:"lg",onChange:m,class:"shadow-sm"},null,8,["modelValue","options"])]),e(U)||e(d)?(a(),i("div",Ue,[e(U)?(a(),i("div",Be,[o[15]||(o[15]=l("span",{class:"text-sm font-medium text-gray-600 dark:text-gray-300"},"Active filters:",-1)),e(t).q?(a(),S(z,{key:0,variant:"soft",size:"md",onClick:o[5]||(o[5]=s=>b("q")),class:"cursor-pointer hover:bg-red-100 dark:hover:bg-red-900 transition-colors"},{default:c(()=>[u(' "'+y(e(t).q)+'" × ',1)]),_:1})):g("",!0),e(t).country?(a(),S(z,{key:1,variant:"soft",size:"md",onClick:o[6]||(o[6]=s=>b("country")),class:"cursor-pointer hover:bg-red-100 dark:hover:bg-red-900 transition-colors"},{default:c(()=>[u(y(e(t).country)+" × ",1)]),_:1})):g("",!0),e(t).topic?(a(),S(z,{key:2,variant:"soft",size:"md",onClick:o[7]||(o[7]=s=>b("topic")),class:"cursor-pointer hover:bg-red-100 dark:hover:bg-red-900 transition-colors"},{default:c(()=>[u(y(e(t).topic)+" × ",1)]),_:1})):g("",!0),e(t).format?(a(),S(z,{key:3,variant:"soft",size:"md",onClick:o[8]||(o[8]=s=>b("format")),class:"cursor-pointer hover:bg-red-100 dark:hover:bg-red-900 transition-colors"},{default:c(()=>[u(y(k.find(s=>s.value===e(t).format)?.label)+" × ",1)]),_:1})):g("",!0),e(t).closesBefore?(a(),S(z,{key:4,variant:"soft",size:"md",onClick:o[9]||(o[9]=s=>b("closesBefore")),class:"cursor-pointer hover:bg-red-100 dark:hover:bg-red-900 transition-colors"},{default:c(()=>[u(y(e(q).find(s=>s.value===e(t).closesBefore)?.label)+" × ",1)]),_:1})):g("",!0),n(A,{variant:"ghost",size:"sm",onClick:T,icon:"i-heroicons-x-mark"},{default:c(()=>[...o[14]||(o[14]=[u(" Clear all ",-1)])]),_:1})])):g("",!0),e(U)?(a(),i("div",ze,[n(A,{variant:"outline",size:"sm",icon:"i-heroicons-bookmark",onClick:o[10]||(o[10]=s=>x.value=!0)},{default:c(()=>[...o[16]||(o[16]=[u(" Save Search ",-1)])]),_:1})])):g("",!0)])):g("",!0),e(r).length>0?(a(),i("div",Ae,[l("div",Fe,[n(B,{name:"i-heroicons-bookmark",class:"w-4 h-4 text-gray-500"}),o[17]||(o[17]=l("span",{class:"text-sm font-medium text-gray-600 dark:text-gray-300"},"Saved searches:",-1))]),l("div",Ie,[(a(!0),i(D,null,M(e(r),s=>(a(),S(A,{key:s.id,variant:"soft",size:"sm",onClick:Je=>J(s)},{default:c(()=>[u(y(s.name),1)]),_:2},1032,["onClick"]))),128))])])):g("",!0),n(Y,{modelValue:e(x),"onUpdate:modelValue":o[13]||(o[13]=s=>j(x)?x.value=s:null)},{default:c(()=>[n(X,null,{header:c(()=>[...o[18]||(o[18]=[l("h3",{class:"text-lg font-semibold"},"Save Current Search",-1)])]),footer:c(()=>[l("div",Ne,[n(A,{variant:"ghost",onClick:o[12]||(o[12]=s=>x.value=!1)},{default:c(()=>[...o[19]||(o[19]=[u(" Cancel ",-1)])]),_:1}),n(A,{color:"primary",onClick:_,disabled:!e(v).trim()},{default:c(()=>[...o[20]||(o[20]=[u(" Save ",-1)])]),_:1},8,["disabled"])])]),default:c(()=>[l("div",Oe,[n(Q,{label:"Search Name",name:"searchName"},{default:c(()=>[n(O,{modelValue:e(v),"onUpdate:modelValue":o[11]||(o[11]=s=>j(v)?v.value=s:null),placeholder:"e.g. React conferences in Europe",onKeydown:de(_,["enter"])},null,8,["modelValue"])]),_:1})])]),_:1})]),_:1},8,["modelValue"])])])}}}),Te=Object.assign(Pe,{__name:"FilterBar"}),De={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Me={class:"flex justify-between items-center mb-6"},je={class:"text-sm text-gray-500 dark:text-gray-400"},Re={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Ee={key:1,class:"text-center py-12"},Ke={key:2,class:"text-center py-12"},Le={class:"text-gray-500 dark:text-gray-400"},We={key:3},Ge={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8"},He={key:0,class:"flex justify-center"},N=12,ho=G({__name:"search",async setup(R){let C,V;ce({title:"Search CFPs - Call for Papers",meta:[{name:"description",content:"Search and filter through conferences, workshops, and meetups looking for speakers."}]});const f=ue(),t=me(),h=w(1),$=w({q:f.query.q||"",country:f.query.country||"",topic:f.query.topic||"",format:f.query.format||"",closesBefore:f.query.closesBefore||"",page:parseInt(f.query.page||"1"),pageSize:N}),{data:k,pending:q,error:I,refresh:E}=([C,V]=pe(()=>ke("/api/search",{query:F(()=>({...$.value,page:h.value})),server:!0},"$c02gJMxSum")),C=await C,V(),C),x=F(()=>Math.ceil((k.value?.total||0)/N));function v(d){$.value={...d,page:1,pageSize:N},h.value=1;const r={};d.q&&(r.q=d.q),d.country&&(r.country=d.country),d.topic&&(r.topic=d.topic),d.format&&(r.format=d.format),d.closesBefore&&(r.closesBefore=d.closesBefore),t.push({query:r})}return H(h,d=>{const r={...f.query,page:d.toString()};d===1&&delete r.page,t.push({query:r})}),(d,r)=>{const U=Te,m=_e,P=W,b=ye,T=he;return a(),i("div",null,[n(U,{filters:e($),"onUpdate:filters":v},null,8,["filters"]),l("div",De,[l("div",Me,[r[1]||(r[1]=l("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"}," Search CFPs ",-1)),l("div",je,y(e(q)?"Loading...":`${e(k)?.total||0} results found`),1)]),e(q)?(a(),i("div",Re,[(a(),i(D,null,M(12,_=>l("div",{key:_,class:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden animate-pulse"},[...r[2]||(r[2]=[ge('<div class="h-3 bg-gradient-to-r from-gray-200 to-gray-300 dark:from-gray-700 dark:to-gray-600 w-full"></div><div class="p-6 space-y-4"><div class="h-6 bg-gray-200 dark:bg-gray-700 rounded w-3/4"></div><div class="h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2"></div><div class="space-y-2"><div class="h-3 bg-gray-200 dark:bg-gray-700 rounded"></div><div class="h-3 bg-gray-200 dark:bg-gray-700 rounded w-5/6"></div></div><div class="flex gap-2"><div class="h-6 bg-gray-200 dark:bg-gray-700 rounded-full w-16"></div><div class="h-6 bg-gray-200 dark:bg-gray-700 rounded-full w-20"></div></div><div class="pt-4 border-t border-gray-200 dark:border-gray-700"><div class="h-4 bg-gray-200 dark:bg-gray-700 rounded w-2/3"></div></div></div>',2)])])),64))])):e(I)?(a(),i("div",Ee,[n(m,{icon:"i-heroicons-exclamation-triangle",color:"red",variant:"soft",title:"Failed to load CFPs",description:e(I).message},null,8,["description"])])):e(k)?.items?.length?(a(),i("div",We,[l("div",Ge,[(a(!0),i(D,null,M(e(k).items,_=>(a(),S(b,{key:_.id,cfp:_},null,8,["cfp"]))),128))]),e(x)>1?(a(),i("div",He,[n(T,{modelValue:e(h),"onUpdate:modelValue":r[0]||(r[0]=_=>j(h)?h.value=_:null),"page-count":N,total:e(k).total},null,8,["modelValue","total"])])):g("",!0)])):(a(),i("div",Ke,[l("div",Le,[n(P,{name:"i-heroicons-magnifying-glass",class:"w-12 h-12 mx-auto mb-4"}),r[3]||(r[3]=l("p",{class:"text-lg mb-2"},"No CFPs found",-1)),r[4]||(r[4]=l("p",null,"Try adjusting your search filters or check back later for new opportunities.",-1))])]))])])}}});export{ho as default};
